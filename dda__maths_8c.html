<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Teacup: dda_maths.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dda_maths.c File Reference</h1>
<p>Mathematic algorithms for the digital differential analyser (<a class="el" href="structDDA.html" title="this is a digital differential analyser data struct">DDA</a>).  
<a href="#_details">More...</a></p>
<code>#include &quot;dda_maths.h&quot;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dda__maths_8c.html#a5dc9605313ca4e02cdfe56a3e37de5e6">muldivQR</a> (int32_t multiplicand, uint32_t qn, uint32_t rn, uint32_t divisor)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Integer multiply-divide algorithm.  <a href="#a5dc9605313ca4e02cdfe56a3e37de5e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dda__maths_8c.html#a018460bc6f1bad1138d996a6473e0d47">approx_distance</a> (uint32_t dx, uint32_t dy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">linear approximation 2d distance formula  <a href="#a018460bc6f1bad1138d996a6473e0d47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dda__maths_8c.html#aceadda4508dccdb87e6acb80ba7a71ac">approx_distance_3</a> (uint32_t dx, uint32_t dy, uint32_t dz)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">linear approximation 3d distance formula  <a href="#aceadda4508dccdb87e6acb80ba7a71ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dda__maths_8c.html#a80bb00377ef9acf0502c281f3ff8b05d">int_sqrt</a> (uint32_t a)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">integer square root algorithm  <a href="#a80bb00377ef9acf0502c281f3ff8b05d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dda__maths_8c.html#abe8d691d358c400849ecee13bafc4e33">msbloc</a> (uint32_t v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">crude logarithm algorithm  <a href="#abe8d691d358c400849ecee13bafc4e33"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Mathematic algorithms for the digital differential analyser (<a class="el" href="structDDA.html" title="this is a digital differential analyser data struct">DDA</a>). </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a018460bc6f1bad1138d996a6473e0d47"></a><!-- doxytag: member="dda_maths.c::approx_distance" ref="a018460bc6f1bad1138d996a6473e0d47" args="(uint32_t dx, uint32_t dy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t approx_distance </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>linear approximation 2d distance formula </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dx</em>&nbsp;</td><td>distance in X plane </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dy</em>&nbsp;</td><td>distance in Y plane </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>3-part linear approximation of <img class="formulaInl" alt="$\sqrt{\Delta x^2 + \Delta y^2}$" src="form_2.png"/></dd></dl>
<p>see <a href="http://www.flipcode.com/archives/Fast_Approximate_Distance_Functions.shtml">http://www.flipcode.com/archives/Fast_Approximate_Distance_Functions.shtml</a> </p>

<p>Referenced by <a class="el" href="dda_8c_source.html#l00085">dda_create()</a>.</p>

</div>
</div>
<a class="anchor" id="aceadda4508dccdb87e6acb80ba7a71ac"></a><!-- doxytag: member="dda_maths.c::approx_distance_3" ref="aceadda4508dccdb87e6acb80ba7a71ac" args="(uint32_t dx, uint32_t dy, uint32_t dz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t approx_distance_3 </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>linear approximation 3d distance formula </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dx</em>&nbsp;</td><td>distance in X plane </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dy</em>&nbsp;</td><td>distance in Y plane </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dz</em>&nbsp;</td><td>distance in Z plane </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>3-part linear approximation of <img class="formulaInl" alt="$\sqrt{\Delta x^2 + \Delta y^2 + \Delta z^2}$" src="form_3.png"/></dd></dl>
<p>see <a href="http://www.oroboro.com/rafael/docserv.php/index/programming/article/distance">http://www.oroboro.com/rafael/docserv.php/index/programming/article/distance</a> </p>

<p>Referenced by <a class="el" href="dda_8c_source.html#l00085">dda_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a80bb00377ef9acf0502c281f3ff8b05d"></a><!-- doxytag: member="dda_maths.c::int_sqrt" ref="a80bb00377ef9acf0502c281f3ff8b05d" args="(uint32_t a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t int_sqrt </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>a</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>integer square root algorithm </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>find square root of this number </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>sqrt(a - 1) &lt; returnvalue &lt;= sqrt(a)</dd></dl>
<p>see <a href="http://www.embedded-systems.com/98/9802fe2.htm">http://www.embedded-systems.com/98/9802fe2.htm</a> </p>

</div>
</div>
<a class="anchor" id="abe8d691d358c400849ecee13bafc4e33"></a><!-- doxytag: member="dda_maths.c::msbloc" ref="abe8d691d358c400849ecee13bafc4e33" args="(uint32_t v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t msbloc </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>crude logarithm algorithm </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>v</em>&nbsp;</td><td>value to find <img class="formulaInl" alt="$log_2$" src="form_4.png"/> of </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>floor(log(v) / log(2)) </dd></dl>

<p>Referenced by <a class="el" href="dda_8c_source.html#l00085">dda_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a5dc9605313ca4e02cdfe56a3e37de5e6"></a><!-- doxytag: member="dda_maths.c::muldivQR" ref="a5dc9605313ca4e02cdfe56a3e37de5e6" args="(int32_t multiplicand, uint32_t qn, uint32_t rn, uint32_t divisor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int32_t muldivQR </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>multiplicand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>qn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>rn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>divisor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Integer multiply-divide algorithm. </p>
<p>Returns the same as muldiv(multiplicand, multiplier, divisor), but also allowing to use precalculated quotients and remainders.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>multiplicand</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qn</em>&nbsp;</td><td>( = multiplier / divisor ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rn</em>&nbsp;</td><td>( = multiplier % divisor ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>divisor</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>rounded result of multiplicand * multiplier / divisor</dd></dl>
<p>Calculate a * b / c, without overflowing and without using 64-bit integers. Doing this the standard way, a * b could easily overflow, even if the correct overall result fits into 32 bits. This algorithm avoids this intermediate overflow and delivers valid results for all cases where each of the three operators as well as the result fits into 32 bits.</p>
<p>Found on <a href="http://stackoverflow.com/questions/4144232/">http://stackoverflow.com/questions/4144232/</a> how-to-calculate-a-times-b-divided-by-c-only-using-32-bit-integer-types-even-i </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Jul 2012 for Teacup by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
