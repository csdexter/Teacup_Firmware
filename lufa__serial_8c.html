<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Teacup: lufa_serial.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4455a60041ec07e77cb0ed4f7da1c548.html">lufa_serial</a>
  </div>
</div>
<div class="contents">
<h1>lufa_serial.c File Reference</h1>
<p>Main source file for the VirtualSerial demo.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="lufa__serial_8c.html">lufa_serial.h</a>&quot;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/wdt.h&gt;</code><br/>
<code>#include &lt;avr/power.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="Descriptors_8h_source.html">Descriptors.h</a>&quot;</code><br/>
<code>#include &lt;LUFA/Version.h&gt;</code><br/>
<code>#include &lt;LUFA/Drivers/USB/USB.h&gt;</code><br/>
<code>#include &lt;LUFA/Drivers/Board/Joystick.h&gt;</code><br/>
<code>#include &lt;LUFA/Drivers/Board/LEDs.h&gt;</code><br/>
<code>#include &lt;avr/pgmspace.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lufa__serial_8c.html#ad2b461e9e9044364a28a61cfadcacdd8">serial_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialise serial subsystem  <a href="#ad2b461e9e9044364a28a61cfadcacdd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lufa__serial_8c.html#aeff97648c9250a3d398bb0b74f040899">EVENT_USB_Device_Connect</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event handler for the USB_Connect event.  <a href="#aeff97648c9250a3d398bb0b74f040899"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lufa__serial_8c.html#ae88405d14d8d6dada9313520cb1501ec">EVENT_USB_Device_Disconnect</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event handler for the USB_Disconnect event.  <a href="#ae88405d14d8d6dada9313520cb1501ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lufa__serial_8c.html#a953a275884b9e33629ff6323fca05252">EVENT_USB_Device_ConfigurationChanged</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event handler for the USB_ConfigurationChanged event.  <a href="#a953a275884b9e33629ff6323fca05252"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lufa__serial_8c.html#a3f4ce439a74a152e3c8ffda5c7dd201a">EVENT_USB_Device_ControlRequest</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event handler for the USB_ControlRequest event.  <a href="#a3f4ce439a74a152e3c8ffda5c7dd201a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a61f586f4a26eaa0098d5974fdbd6eb2c"></a><!-- doxytag: member="lufa_serial.c::serial_rxchars" ref="a61f586f4a26eaa0098d5974fdbd6eb2c" args="(void)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>serial_rxchars</b> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e3dcb4e8d06786117395b3c233c43e4"></a><!-- doxytag: member="lufa_serial.c::serial_popchar" ref="a1e3dcb4e8d06786117395b3c233c43e4" args="(void)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>serial_popchar</b> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ae3a1344cad5fd297b7d575b59bf520"></a><!-- doxytag: member="lufa_serial.c::serial_writestr_P" ref="a4ae3a1344cad5fd297b7d575b59bf520" args="(PGM_P data)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>serial_writestr_P</b> (PGM_P data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a218860ac8eaeb39d590e5d5ff84c6638"></a><!-- doxytag: member="lufa_serial.c::serial_writechar" ref="a218860ac8eaeb39d590e5d5ff84c6638" args="(uint8_t data)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>serial_writechar</b> (uint8_t data)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CDC_LineEncoding_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lufa__serial_8c.html#a40f21d872877b0baf00d9a3c8dabfc33">LineEncoding</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Contains the current baud rate and other settings of the virtual serial port.  <a href="#a40f21d872877b0baf00d9a3c8dabfc33"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Main source file for the VirtualSerial demo. </p>
<p>This file contains the main tasks of the demo and is responsible for the initial application hardware configuration. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a953a275884b9e33629ff6323fca05252"></a><!-- doxytag: member="lufa_serial.c::EVENT_USB_Device_ConfigurationChanged" ref="a953a275884b9e33629ff6323fca05252" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ConfigurationChanged </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Event handler for the USB_ConfigurationChanged event. </p>
<p>This is fired when the host set the current configuration of the USB device after enumeration - the device endpoints are configured and the CDC management task started. </p>

</div>
</div>
<a class="anchor" id="aeff97648c9250a3d398bb0b74f040899"></a><!-- doxytag: member="lufa_serial.c::EVENT_USB_Device_Connect" ref="aeff97648c9250a3d398bb0b74f040899" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Connect </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Event handler for the USB_Connect event. </p>
<p>This indicates that the device is enumerating via the status LEDs and starts the library USB task to begin the enumeration and USB management process. </p>

</div>
</div>
<a class="anchor" id="a3f4ce439a74a152e3c8ffda5c7dd201a"></a><!-- doxytag: member="lufa_serial.c::EVENT_USB_Device_ControlRequest" ref="a3f4ce439a74a152e3c8ffda5c7dd201a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ControlRequest </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Event handler for the USB_ControlRequest event. </p>
<p>This is used to catch and process control requests sent to the device from the USB host before passing along unhandled control requests to the library for processing internally. </p>

</div>
</div>
<a class="anchor" id="ae88405d14d8d6dada9313520cb1501ec"></a><!-- doxytag: member="lufa_serial.c::EVENT_USB_Device_Disconnect" ref="ae88405d14d8d6dada9313520cb1501ec" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Disconnect </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Event handler for the USB_Disconnect event. </p>
<p>This indicates that the device is no longer connected to a host via the status LEDs and stops the USB management and CDC management tasks. </p>

</div>
</div>
<a class="anchor" id="ad2b461e9e9044364a28a61cfadcacdd8"></a><!-- doxytag: member="lufa_serial.c::serial_init" ref="ad2b461e9e9044364a28a61cfadcacdd8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialise serial subsystem </p>
<p>set up baud generator and interrupts, clear buffers </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a40f21d872877b0baf00d9a3c8dabfc33"></a><!-- doxytag: member="lufa_serial.c::LineEncoding" ref="a40f21d872877b0baf00d9a3c8dabfc33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CDC_LineEncoding_t <a class="el" href="lufa__serial_8c.html#a40f21d872877b0baf00d9a3c8dabfc33">LineEncoding</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> { .BaudRateBPS = 0,
                                    .CharFormat  = CDC_LINEENCODING_OneStopBit,
                                    .ParityType  = CDC_PARITY_None,
                                    .DataBits    = 8                            }
</pre></div>
<p>Contains the current baud rate and other settings of the virtual serial port. </p>
<p>While this demo does not use the physical USART and thus does not use these settings, they must still be retained and returned to the host upon request or the host will assume the device is non-functional.</p>
<p>These values are set by the host via a class-specific request, however they are not required to be used accurately. It is possible to completely ignore these value or use other settings as the host is completely unaware of the physical serial link characteristics and instead sends and receives data in endpoint streams. </p>

<p>Referenced by <a class="el" href="lufa__serial_8c_source.html#l00091">EVENT_USB_Device_ConfigurationChanged()</a>, and <a class="el" href="lufa__serial_8c_source.html#l00114">EVENT_USB_Device_ControlRequest()</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Jul 30 16:33:59 2012 for Teacup by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
